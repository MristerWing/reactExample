# 컴포넌트 성능 최적화

1. 많은 데이터를 렌더링 할 경우 지연(렉)이 발생하게 된다.
2. 이 때 성능지연이 발생한다면 모니터링 툴을 이용하여 확인하여야 한다.
    - 크롬 개발자 도구 -> Performance
3. 개발자 도구에서 녹화버튼을 누르면 성능을 측정할 수 있다.
4. 녹화후 Timings에 들어가면 각 컴포넌트의 실행이 얼마나 걸렸는지를 알 수 있다.

### 컴포넌트의 지연발생 원인

-   컴포넌트의 지연발생 원인은 다음과 같다.

    1. 자신의 전달받은 `props`가 변경될 때
    2. 자신의 `state`가 바뀔 때
    3. `forceUpdate` 함수가 실행될 때

### 지연 해결 방법

-   컴포넌트의 성능을 최적화 하기 위해서는 상위 컴포넌트가 갱신될때 모든 컴포넌트를 업데이트하는 것이 아니라 갱신되는 컴포넌트만 갱신해야 한다.

-   이를 해결하기 위해서 `React.memo`함수로 컴포넌트를 감싸주면 된다.(Ex `export default React.memo(Example);`)

-   또한 함수의 발생을 최적화 하기 위해 함수형 업데이트를 이용한다.

-   `useReducer`사용시 두번째 인자에 초기 상태를 넣어주어야 하지만, 2번째를 undefind로 두고 세번째에 인자를 넣어주면 컴포넌트가 맨 처음 랜더링 될 때에만 인자값을 초기화 하게 동작시킬 수 있다.

-   리스트 관련 컴포넌트는 리스트와 아이템 두개 다 최적화 시켜주어야 한다.

### 불변성

-   리액트 컴포넌트에서 상태를 업데이트할 때 불변성을 지키는 것이 매우 중요하다.
-   불변성을 지키는 가장 중요한 이유는 객체 내부의 값이 새롭게 바뀌였을 때 감지하기 위해서다.
-   리액트나 javascript에서 불변성을 유지시키기 위해선 가장 좋은 방법은 `...`(확산 연산자)를 이용하면 쉽다.
